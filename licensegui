-- Roblox Services
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")
local HttpService = game:GetService("HttpService")

--- KeyAuth Configuration
local KeyAuthApp = "FENNIXXX"
local KeyAuthOwnerID = "edcEgR58Gp"
local KeyAuthVersion = "1.0"
local KeyAuthURL = "https://keyauth.win/api/1.2/"

-- ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð°Ñ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸
local isAuthorized = false
local sessionID = ""

-- Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ HWID
local function getHWID()
    local hwid = game:GetService("RbxAnalyticsService"):GetClientId()
    return hwid
end

-- Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ KeyAuth
local function initKeyAuth()
    local success, response = pcall(function()
        return request({
            Url = KeyAuthURL,
            Method = "POST",
            Headers = {
                ["Content-Type"] = "application/x-www-form-urlencoded"
            },
            Body = "type=init&ver=" .. KeyAuthVersion .. "&name=" .. KeyAuthApp .. "&ownerid=" .. KeyAuthOwnerID
        })
    end)
    
    if not success then
        warn("KeyAuth init request failed: " .. tostring(response))
        return false, "Connection failed"
    end
    
    if response.StatusCode == 200 then
        local decodeSuccess, data = pcall(function()
            return HttpService:JSONDecode(response.Body)
        end)
        
        if decodeSuccess then
            if data.success then
                sessionID = data.sessionid
                return true, "Initialized"
            else
                warn("KeyAuth init failed: " .. (data.message or "Unknown error"))
                return false, data.message or "Init failed"
            end
        else
            warn("KeyAuth init decode failed: " .. response.Body)
            return false, "Invalid response"
        end
    else
        warn("KeyAuth init status code: " .. response.StatusCode)
        return false, "Server error: " .. response.StatusCode
    end
end

-- Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð»Ð¸Ñ†ÐµÐ½Ð·Ð¸Ð¸
local function verifyLicense(key)
    if not sessionID or sessionID == "" then
        local initSuccess, initMsg = initKeyAuth()
        if not initSuccess then
            return false, "Failed to initialize: " .. initMsg
        end
        wait(0.5) -- ÐÐµÐ±Ð¾Ð»ÑŒÑˆÐ°Ñ Ð·Ð°Ð´ÐµÑ€Ð¶ÐºÐ° Ð¿Ð¾ÑÐ»Ðµ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸
    end
    
    local hwid = getHWID()
    
    local success, response = pcall(function()
        return request({
            Url = KeyAuthURL,
            Method = "POST",
            Headers = {
                ["Content-Type"] = "application/x-www-form-urlencoded"
            },
            Body = "type=license&key=" .. HttpService:UrlEncode(key) .. 
                   "&sessionid=" .. sessionID .. 
                   "&name=" .. KeyAuthApp .. 
                   "&ownerid=" .. KeyAuthOwnerID .. 
                   "&hwid=" .. hwid
        })
    end)
    
    if not success then
        warn("KeyAuth license request failed: " .. tostring(response))
        return false, "Connection failed"
    end
    
    if response.StatusCode == 200 then
        local decodeSuccess, data = pcall(function()
            return HttpService:JSONDecode(response.Body)
        end)
        
        if decodeSuccess then
            if data.success then
                local exp = "Lifetime"
                if data.info and data.info.subscriptions then
                    for _, sub in pairs(data.info.subscriptions) do
                        if sub.expiry and sub.expiry ~= "lifetime" then
                            exp = os.date("%m/%d/%Y %H:%M", tonumber(sub.expiry))
                        end
                    end
                end
                return true, "License verified! Expires: " .. exp
            else
                return false, data.message or "Invalid license key"
            end
        else
            warn("KeyAuth license decode failed: " .. response.Body)
            return false, "Invalid response from server"
        end
    else
        warn("KeyAuth license status code: " .. response.StatusCode .. " Body: " .. response.Body)
        return false, "Server error: " .. response.StatusCode
    end
end

-- Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ GUI Ð´Ð»Ñ Ð²Ð²Ð¾Ð´Ð° ÐºÐ»ÑŽÑ‡Ð°
local function createAuthGUI()
    local authGui = Instance.new("ScreenGui")
    authGui.Name = "KeyAuthGUI"
    authGui.IgnoreGuiInset = true
    authGui.ResetOnSpawn = false
    authGui.Parent = CoreGui
    
    -- Ð—Ð°Ñ‚ÐµÐ¼Ð½ÐµÐ½Ð½Ñ‹Ð¹ Ñ„Ð¾Ð½
    local darkBackground = Instance.new("Frame")
    darkBackground.Size = UDim2.new(1, 0, 1, 0)
    darkBackground.Position = UDim2.new(0, 0, 0, 0)
    darkBackground.BackgroundColor3 = Color3.fromRGB(5, 5, 10)
    darkBackground.BorderSizePixel = 0
    darkBackground.BackgroundTransparency = 0.1
    darkBackground.Parent = authGui
    
    -- Ð“Ñ€Ð°Ð´Ð¸ÐµÐ½Ñ‚ Ð´Ð»Ñ Ñ„Ð¾Ð½Ð°
    local bgGradient = Instance.new("UIGradient", darkBackground)
    bgGradient.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(10, 10, 20)),
        ColorSequenceKeypoint.new(0.5, Color3.fromRGB(5, 5, 15)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(10, 10, 20))
    }
    bgGradient.Rotation = 45
    
    -- Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑÐ½ÐµÐ¶Ð¸Ð½Ð¾Ðº
    local snowflakes = {}
    for i = 1, 50 do
        local snowflake = Instance.new("Frame")
        snowflake.Size = UDim2.new(0, math.random(2, 6), 0, math.random(2, 6))
        snowflake.Position = UDim2.new(math.random(0, 100) / 100, 0, math.random(-50, 0) / 100, 0)
        snowflake.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        snowflake.BackgroundTransparency = math.random(30, 70) / 100
        snowflake.BorderSizePixel = 0
        snowflake.Parent = darkBackground
        
        local snowCorner = Instance.new("UICorner", snowflake)
        snowCorner.CornerRadius = UDim.new(1, 0)
        
        table.insert(snowflakes, {
            frame = snowflake,
            speed = math.random(20, 50) / 1000,
            drift = math.random(-10, 10) / 1000
        })
    end
    
    -- ÐÐ½Ð¸Ð¼Ð°Ñ†Ð¸Ñ ÑÐ½ÐµÐ¶Ð¸Ð½Ð¾Ðº
    local snowConnection
    snowConnection = RunService.RenderStepped:Connect(function()
        for _, snow in ipairs(snowflakes) do
            local currentPos = snow.frame.Position
            local newY = currentPos.Y.Scale + snow.speed
            local newX = currentPos.X.Scale + snow.drift
            
            if newY > 1.2 then
                newY = -0.1
                newX = math.random(0, 100) / 100
            end
            if newX > 1.1 then newX = -0.1 end
            if newX < -0.1 then newX = 1.1 end
            
            snow.frame.Position = UDim2.new(newX, 0, newY, 0)
        end
    end)
    
    -- ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ñ„Ñ€ÐµÐ¹Ð¼ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸
    local authFrame = Instance.new("Frame")
    authFrame.Size = UDim2.new(0, 450, 0, 360)
    authFrame.Position = UDim2.new(0.5, -225, 0.5, -180)
    authFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 25)
    authFrame.BorderSizePixel = 0
    authFrame.BackgroundTransparency = 0.05
    authFrame.Parent = authGui
    
    local authCorner = Instance.new("UICorner", authFrame)
    authCorner.CornerRadius = UDim.new(0, 20)
    
    -- ÐÐµÐ¾Ð½Ð¾Ð²Ð°Ñ Ð¾Ð±Ð²Ð¾Ð´ÐºÐ°
    local authStroke = Instance.new("UIStroke", authFrame)
    authStroke.Color = Color3.fromRGB(100, 150, 255)
    authStroke.Thickness = 3
    authStroke.Transparency = 0.3
    
    -- ÐÐ½Ð¸Ð¼Ð°Ñ†Ð¸Ñ ÑÐ²ÐµÑ‡ÐµÐ½Ð¸Ñ Ð¾Ð±Ð²Ð¾Ð´ÐºÐ¸
    local glowTween = TweenService:Create(authStroke, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true), {
        Color = Color3.fromRGB(150, 100, 255)
    })
    glowTween:Play()
    
    -- Ð“Ñ€Ð°Ð´Ð¸ÐµÐ½Ñ‚ Ñ„Ñ€ÐµÐ¹Ð¼Ð°
    local authGradient = Instance.new("UIGradient", authFrame)
    authGradient.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(25, 25, 40)),
        ColorSequenceKeypoint.new(0.5, Color3.fromRGB(15, 15, 25)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(20, 20, 35))
    }
    authGradient.Rotation = 90
    
    -- Ð˜ÐºÐ¾Ð½ÐºÐ° Ð·Ð°Ð¼ÐºÐ°
    local lockIcon = Instance.new("TextLabel")
    lockIcon.Size = UDim2.new(0, 60, 0, 60)
    lockIcon.Position = UDim2.new(0.5, -30, 0, 25)
    lockIcon.Text = "ðŸ”"
    lockIcon.TextSize = 48
    lockIcon.BackgroundTransparency = 1
    lockIcon.Parent = authFrame
    
    -- ÐÐ½Ð¸Ð¼Ð°Ñ†Ð¸Ñ Ð¸ÐºÐ¾Ð½ÐºÐ¸
    local iconTween = TweenService:Create(lockIcon, TweenInfo.new(1.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true), {
        Rotation = 10
    })
    iconTween:Play()
    
    -- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(1, 0, 0, 50)
    titleLabel.Position = UDim2.new(0, 0, 0, 90)
    titleLabel.Text = "SILENT AIM AUTHENTICATION"
    titleLabel.TextColor3 = Color3.fromRGB(200, 220, 255)
    titleLabel.TextSize = 20
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.BackgroundTransparency = 1
    titleLabel.Parent = authFrame
    
    -- ÐŸÐ¾Ð´Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº
    local subtitleLabel = Instance.new("TextLabel")
    subtitleLabel.Size = UDim2.new(1, 0, 0, 30)
    subtitleLabel.Position = UDim2.new(0, 0, 0, 135)
    subtitleLabel.Text = "Enter your premium license key"
    subtitleLabel.TextColor3 = Color3.fromRGB(150, 170, 200)
    subtitleLabel.TextSize = 13
    subtitleLabel.Font = Enum.Font.Gotham
    subtitleLabel.BackgroundTransparency = 1
    subtitleLabel.Parent = authFrame
    
    -- HWID Display
    local hwidLabel = Instance.new("TextLabel")
    hwidLabel.Size = UDim2.new(1, -30, 0, 20)
    hwidLabel.Position = UDim2.new(0, 15, 0, 160)
    hwidLabel.Text = "HWID: " .. getHWID()
    hwidLabel.TextColor3 = Color3.fromRGB(100, 120, 150)
    hwidLabel.TextSize = 10
    hwidLabel.Font = Enum.Font.GothamMedium
    hwidLabel.BackgroundTransparency = 1
    hwidLabel.TextXAlignment = Enum.TextXAlignment.Left
    hwidLabel.Parent = authFrame
    
    -- Copy HWID Button
    local copyHWIDBtn = Instance.new("TextButton")
    copyHWIDBtn.Size = UDim2.new(0, 60, 0, 20)
    copyHWIDBtn.Position = UDim2.new(1, -75, 0, 160)
    copyHWIDBtn.BackgroundColor3 = Color3.fromRGB(60, 80, 150)
    copyHWIDBtn.Text = "COPY"
    copyHWIDBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    copyHWIDBtn.TextSize = 10
    copyHWIDBtn.Font = Enum.Font.GothamBold
    copyHWIDBtn.BorderSizePixel = 0
    copyHWIDBtn.Parent = authFrame
    
    local copyCorner = Instance.new("UICorner", copyHWIDBtn)
    copyCorner.CornerRadius = UDim.new(0, 6)
    
    copyHWIDBtn.MouseButton1Click:Connect(function()
        setclipboard(getHWID())
        copyHWIDBtn.Text = "âœ“"
        copyHWIDBtn.BackgroundColor3 = Color3.fromRGB(100, 200, 100)
        wait(1)
        copyHWIDBtn.Text = "COPY"
        copyHWIDBtn.BackgroundColor3 = Color3.fromRGB(60, 80, 150)
    end)
    
    -- ÐŸÐ¾Ð»Ðµ Ð²Ð²Ð¾Ð´Ð° ÐºÐ»ÑŽÑ‡Ð°
    local keyBox = Instance.new("TextBox")
    keyBox.Size = UDim2.new(0, 380, 0, 50)
    keyBox.Position = UDim2.new(0.5, -190, 0, 195)
    keyBox.BackgroundColor3 = Color3.fromRGB(20, 20, 35)
    keyBox.Text = ""
    keyBox.PlaceholderText = "KEYAUTH-XXXXX-XXXXX-XXXXX"
    keyBox.PlaceholderColor3 = Color3.fromRGB(80, 80, 100)
    keyBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    keyBox.TextSize = 15
    keyBox.Font = Enum.Font.GothamBold
    keyBox.BorderSizePixel = 0
    keyBox.ClearTextOnFocus = false
    keyBox.Parent = authFrame
    
    local keyBoxCorner = Instance.new("UICorner", keyBox)
    keyBoxCorner.CornerRadius = UDim.new(0, 12)
    
    local keyBoxStroke = Instance.new("UIStroke", keyBox)
    keyBoxStroke.Color = Color3.fromRGB(60, 80, 150)
    keyBoxStroke.Thickness = 2
    keyBoxStroke.Transparency = 0.5
    
    -- ÐÐ½Ð¸Ð¼Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð¸ Ñ„Ð¾ÐºÑƒÑÐµ
    keyBox.Focused:Connect(function()
        TweenService:Create(keyBoxStroke, TweenInfo.new(0.3), {
            Color = Color3.fromRGB(100, 150, 255),
            Transparency = 0
        }):Play()
    end)
    
    keyBox.FocusLost:Connect(function()
        TweenService:Create(keyBoxStroke, TweenInfo.new(0.3), {
            Color = Color3.fromRGB(60, 80, 150),
            Transparency = 0.5
        }):Play()
    end)
    
    -- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ñ
    local submitBtn = Instance.new("TextButton")
    submitBtn.Size = UDim2.new(0, 180, 0, 45)
    submitBtn.Position = UDim2.new(0.5, -90, 0, 265)
    submitBtn.BackgroundColor3 = Color3.fromRGB(80, 120, 255)
    submitBtn.Text = "VERIFY KEY"
    submitBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    submitBtn.TextSize = 16
    submitBtn.Font = Enum.Font.GothamBold
    submitBtn.BorderSizePixel = 0
    submitBtn.Parent = authFrame
    
    local submitBtnCorner = Instance.new("UICorner", submitBtn)
    submitBtnCorner.CornerRadius = UDim.new(0, 12)
    
    local submitBtnStroke = Instance.new("UIStroke", submitBtn)
    submitBtnStroke.Color = Color3.fromRGB(150, 180, 255)
    submitBtnStroke.Thickness = 2
    
    local submitGradient = Instance.new("UIGradient", submitBtn)
    submitGradient.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(100, 140, 255)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(80, 120, 255))
    }
    submitGradient.Rotation = 90
    
    -- Ð¡Ñ‚Ð°Ñ‚ÑƒÑ
    local statusLabel = Instance.new("TextLabel")
    statusLabel.Size = UDim2.new(1, 0, 0, 20)
    statusLabel.Position = UDim2.new(0, 0, 1, -35)
    statusLabel.Text = ""
    statusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
    statusLabel.TextSize = 12
    statusLabel.Font = Enum.Font.GothamBold
    statusLabel.BackgroundTransparency = 1
    statusLabel.Parent = authFrame
    
    -- Get Key Button
    local getKeyBtn = Instance.new("TextButton")
    getKeyBtn.Size = UDim2.new(0, 140, 0, 25)
    getKeyBtn.Position = UDim2.new(0.5, -70, 1, -60)
    getKeyBtn.BackgroundColor3 = Color3.fromRGB(50, 70, 120)
    getKeyBtn.Text = "Get License Key"
    getKeyBtn.TextColor3 = Color3.fromRGB(200, 220, 255)
    getKeyBtn.TextSize = 12
    getKeyBtn.Font = Enum.Font.GothamBold
    getKeyBtn.BorderSizePixel = 0
    getKeyBtn.Parent = authFrame
    
    local getKeyCorner = Instance.new("UICorner", getKeyBtn)
    getKeyCorner.CornerRadius = UDim.new(0, 8)
    
    getKeyBtn.MouseButton1Click:Connect(function()
        setclipboard("https://keyauth.win/panel/" .. KeyAuthApp .. "/licenses")
        getKeyBtn.Text = "Link Copied!"
        getKeyBtn.BackgroundColor3 = Color3.fromRGB(100, 200, 100)
        wait(2)
        getKeyBtn.Text = "Get License Key"
        getKeyBtn.BackgroundColor3 = Color3.fromRGB(50, 70, 120)
    end)
    
    -- Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ ÐºÐ»ÑŽÑ‡Ð°
    local function verifyKey()
        local key = keyBox.Text
        if key == "" or #key < 10 then
            statusLabel.Text = "âŒ Please enter a valid key"
            statusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
            
            local originalPos = authFrame.Position
            for i = 1, 3 do
                TweenService:Create(authFrame, TweenInfo.new(0.05), {Position = originalPos + UDim2.new(0, 10, 0, 0)}):Play()
                wait(0.05)
                TweenService:Create(authFrame, TweenInfo.new(0.05), {Position = originalPos - UDim2.new(0, 10, 0, 0)}):Play()
                wait(0.05)
            end
            authFrame.Position = originalPos
            return
        end
        
        submitBtn.Text = "VERIFYING..."
        submitBtn.BackgroundColor3 = Color3.fromRGB(100, 100, 120)
        statusLabel.TextColor3 = Color3.fromRGB(255, 200, 100)
        
        local loading = true
        spawn(function()
            local dotCount = 0
            while loading do
                statusLabel.Text = "â³ Checking license" .. string.rep(".", (dotCount % 4))
                dotCount = dotCount + 1
                wait(0.5)
            end
        end)
        
        local verifySuccess, success, message = pcall(function()
            return verifyLicense(key)
        end)
        
        loading = false
        
        if verifySuccess and success then
            isAuthorized = true
            statusLabel.Text = "âœ… " .. message
            statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
            
            lockIcon.Text = "âœ“"
            TweenService:Create(lockIcon, TweenInfo.new(0.5), {
                TextColor3 = Color3.fromRGB(100, 255, 100),
                TextSize = 60
            }):Play()
            TweenService:Create(submitBtn, TweenInfo.new(0.5), {
                BackgroundColor3 = Color3.fromRGB(100, 255, 100)
            }):Play()
            
            wait(2)
            
            snowConnection:Disconnect()
            TweenService:Create(authFrame, TweenInfo.new(0.8, Enum.EasingStyle.Back, Enum.EasingDirection.In), {
                Size = UDim2.new(0, 0, 0, 0),
                Position = UDim2.new(0.5, 0, 0.5, 0),
                BackgroundTransparency = 1
            }):Play()
            TweenService:Create(darkBackground, TweenInfo.new(0.8), {
                BackgroundTransparency = 1
            }):Play()
            
            for _, snow in ipairs(snowflakes) do
                TweenService:Create(snow.frame, TweenInfo.new(0.8), {
                    BackgroundTransparency = 1
                }):Play()
            end
            
            wait(0.8)
            authGui:Destroy()
            initializeScript()
        else
            submitBtn.Text = "VERIFY KEY"
            submitBtn.BackgroundColor3 = Color3.fromRGB(80, 120, 255)
            statusLabel.Text = "âŒ " .. (message or "Verification failed")
            statusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
            
            local originalPos = authFrame.Position
            for i = 1, 3 do
                TweenService:Create(authFrame, TweenInfo.new(0.05), {Position = originalPos + UDim2.new(0, 10, 0, 0)}):Play()
                wait(0.05)
                TweenService:Create(authFrame, TweenInfo.new(0.05), {Position = originalPos - UDim2.new(0, 10, 0, 0)}):Play()
                wait(0.05)
            end
            authFrame.Position = originalPos
        end
    end
    
    submitBtn.MouseButton1Click:Connect(verifyKey)
    keyBox.FocusLost:Connect(function(enterPressed)
        if enterPressed then
            verifyKey()
        end
    end)
    
    submitBtn.MouseEnter:Connect(function()
        TweenService:Create(submitBtn, TweenInfo.new(0.2), {
            Size = UDim2.new(0, 190, 0, 48),
            BackgroundColor3 = Color3.fromRGB(100, 140, 255)
        }):Play()
    end)
    
    submitBtn.MouseLeave:Connect(function()
        if submitBtn.Text == "VERIFY KEY" then
            TweenService:Create(submitBtn, TweenInfo.new(0.2), {
                Size = UDim2.new(0, 180, 0, 45),
                BackgroundColor3 = Color3.fromRGB(80, 120, 255)
            }):Play()
        end
    end)
    
    -- ÐÐ½Ð¸Ð¼Ð°Ñ†Ð¸Ñ Ð¿Ð¾ÑÐ²Ð»ÐµÐ½Ð¸Ñ
    authFrame.Size = UDim2.new(0, 0, 0, 0)
    authFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
    authFrame.BackgroundTransparency = 1
    TweenService:Create(authFrame, TweenInfo.new(0.8, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
        Size = UDim2.new(0, 450, 0, 360),
        Position = UDim2.new(0.5, -225, 0.5, -180),
        BackgroundTransparency = 0.05
    }):Play()
end

-- ÐžÑÐ½Ð¾Ð²Ð½Ð°Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ ÑÐºÑ€Ð¸Ð¿Ñ‚Ð°
function initializeScript()
    if not isAuthorized then
        return
    end

-- Configuration
local Config = {
    Enabled = true,
    HitPart = "Closest Point",
    FOVSize = 80,
    TeamCheck = true,
    KnockedCheck = true,
    WallCheck = true,
    VisibleCheck = true,
    MaxDistance = 500,
    Keybind = Enum.KeyCode.C,
    Resolver = true,
    ShowFOV = true,
    RapidFire = false,
    RapidFireDelay = 0.05,
    Multipoint = true,
    MultipointSize = 5,
    ShowTargeting = true,
 
    UpdateRate = 3,
    MaxPlayersToCheck = 15,
    UseSpatialOptimization = true,
 
    WeaponProfiles = {
        ["Revolver"] = {
            Prediction = Vector3.new(0, 0, 0),
            MaxDistance = 400
        },
        ["Double-Barrel"] = {
            Prediction = Vector3.new(0, 0, 0),
            MaxDistance = 200
        },
        ["Shotgun"] = {
            Prediction = Vector3.new(0, 0, 0),
            MaxDistance = 200
        },
        ["TacticalShotgun"] = {
            Prediction = Vector3.new(0, 0, 0),
            MaxDistance = 225
        },
        ["SMG"] = {
            Prediction = Vector3.new(0, 0, 0),
            MaxDistance = 350
        },
        ["Rifle"] = {
            Prediction = Vector3.new(0, 0, 0),
            MaxDistance = 500
        },
        ["AR"] = {
            Prediction = Vector3.new(0, 0, 0),
            MaxDistance = 450
        },
        ["AK47"] = {
            Prediction = Vector3.new(0, 0, 0),
            MaxDistance = 500
        },
        ["Silencer"] = {
            Prediction = Vector3.new(0, 0, 0),
            MaxDistance = 400
        },
        ["Default"] = {
            Prediction = Vector3.new(0, 0, 0),
            MaxDistance = 400
        }
    },
 
    CurrentWeapon = nil,
    CurrentPrediction = Vector3.new(0.165, 0.165, 0.165),
    CurrentMaxDistance = 400,
 
    -- ESP Settings
    ESP = {
        Enabled = true,
        ShowBox = true,
        ShowName = true,
        ShowDistance = true,
        ShowHealth = true,
        ShowSkeleton = true,
        BoxColor = Color3.fromRGB(255, 255, 255),
        NameColor = Color3.fromRGB(255, 255, 255),
        DistanceColor = Color3.fromRGB(200, 200, 200),
        HealthBarColor = Color3.fromRGB(0, 255, 0),
        SkeletonColor = Color3.fromRGB(255, 255, 255),
        MaxDistance = 500,
        TeamCheck = true
    }
}

local SpreadMod = {
    BulletSpread = {
        Enabled = true,
        Amount = 70
    }
}

local allBodyParts = {
    "Head",
    "UpperTorso",
    "LowerTorso",
    "HumanoidRootPart",
    "LeftUpperArm",
    "LeftLowerArm",
    "LeftHand",
    "RightUpperArm",
    "RightLowerArm",
    "RightHand",
    "LeftUpperLeg",
    "LeftLowerLeg",
    "LeftFoot",
    "RightUpperLeg",
    "RightLowerLeg",
    "RightFoot"
}

local skeletonConnections = {
    {"Head", "UpperTorso"},
    {"UpperTorso", "LowerTorso"},
    {"UpperTorso", "LeftUpperArm"},
    {"LeftUpperArm", "LeftLowerArm"},
    {"LeftLowerArm", "LeftHand"},
    {"UpperTorso", "RightUpperArm"},
    {"RightUpperArm", "RightLowerArm"},
    {"RightLowerArm", "RightHand"},
    {"LowerTorso", "LeftUpperLeg"},
    {"LeftUpperLeg", "LeftLowerLeg"},
    {"LeftLowerLeg", "LeftFoot"},
    {"LowerTorso", "RightUpperLeg"},
    {"RightUpperLeg", "RightLowerLeg"},
    {"RightLowerLeg", "RightFoot"}
}

local FOVCircle = Drawing.new("Circle")
FOVCircle.Visible = false
FOVCircle.Thickness = 2
FOVCircle.Color = Color3.fromRGB(255, 255, 255)
FOVCircle.Transparency = 1
FOVCircle.NumSides = 24
FOVCircle.Filled = false

local TargetIndicator = Drawing.new("Circle")
TargetIndicator.Visible = false
TargetIndicator.Thickness = 3
TargetIndicator.Color = Color3.fromRGB(255, 0, 0)
TargetIndicator.Transparency = 1
TargetIndicator.NumSides = 16
TargetIndicator.Radius = 8
TargetIndicator.Filled = false

local MultipointCircle = Drawing.new("Circle")
MultipointCircle.Visible = false
MultipointCircle.Thickness = 1
MultipointCircle.Color = Color3.fromRGB(0, 255, 255)
MultipointCircle.Transparency = 0.5
MultipointCircle.NumSides = 12
MultipointCircle.Radius = 5
MultipointCircle.Filled = false

local cachedTarget = nil
local cachedTargetPoint = nil
local lastShotTime = 0
local rapidFireConnection = nil

local playerCache = {}
local lastCacheUpdate = 0
local CACHE_UPDATE_INTERVAL = 1

local mouseLocation = Vector2.new(0, 0)
local lastMouseUpdate = 0

local currentWeaponCache = nil
local lastWeaponCheck = 0
local WEAPON_CHECK_INTERVAL = 0.2

local ESPObjects = {}

local function createESP(player)
    if ESPObjects[player] then return end
 
    local esp = {
        Box = Drawing.new("Square"),
        Name = Drawing.new("Text"),
        Distance = Drawing.new("Text"),
        HealthBar = Drawing.new("Square"),
        HealthBarOutline = Drawing.new("Square"),
        SkeletonLines = {}
    }
 
    for i = 1, #skeletonConnections do
        local line = Drawing.new("Line")
        line.Visible = false
        line.Thickness = 2
        line.Transparency = 1
        table.insert(esp.SkeletonLines, line)
    end
 
    esp.Box.Visible = false
    esp.Box.Thickness = 2
    esp.Box.Filled = false
    esp.Box.Transparency = 1
 
    esp.Name.Visible = false
    esp.Name.Center = true
    esp.Name.Outline = true
    esp.Name.Size = 14
    esp.Name.Font = 2
 
    esp.Distance.Visible = false
    esp.Distance.Center = true
    esp.Distance.Outline = true
    esp.Distance.Size = 13
    esp.Distance.Font = 2
 
    esp.HealthBar.Visible = false
    esp.HealthBar.Filled = true
    esp.HealthBar.Thickness = 1
 
    esp.HealthBarOutline.Visible = false
    esp.HealthBarOutline.Filled = false
    esp.HealthBarOutline.Thickness = 1
    esp.HealthBarOutline.Color = Color3.fromRGB(0, 0, 0)
 
    ESPObjects[player] = esp
end

local function removeESP(player)
    if ESPObjects[player] then
        for _, drawing in pairs(ESPObjects[player]) do
            if type(drawing) == "table" then
                for _, line in pairs(drawing) do
                    line:Remove()
                end
            else
                drawing:Remove()
            end
        end
        ESPObjects[player] = nil
    end
end

local function updateESP()
    if not Config.ESP.Enabled then
        for _, esp in pairs(ESPObjects) do
            for key, drawing in pairs(esp) do
                if key == "SkeletonLines" then
                    for _, line in pairs(drawing) do
                        line.Visible = false
                    end
                else
                    drawing.Visible = false
                end
            end
        end
        return
    end
 
    for player, esp in pairs(ESPObjects) do
        if player and player.Character and player ~= LocalPlayer then
            local character = player.Character
            local hrp = character:FindFirstChild("HumanoidRootPart")
            local head = character:FindFirstChild("Head")
            local humanoid = character:FindFirstChildOfClass("Humanoid")
 
            if hrp and head and humanoid and humanoid.Health > 0 then
                local distance = (LocalPlayer.Character.HumanoidRootPart.Position - hrp.Position).Magnitude
 
                if distance <= Config.ESP.MaxDistance then
                    if Config.ESP.TeamCheck and LocalPlayer.Team and player.Team and LocalPlayer.Team == player.Team then
                        for key, drawing in pairs(esp) do
                            if key == "SkeletonLines" then
                                for _, line in pairs(drawing) do
                                    line.Visible = false
                                end
                            else
                                drawing.Visible = false
                            end
                        end
                    else
                        local vector, onScreen = Camera:WorldToViewportPoint(hrp.Position)
 
                        if onScreen then
                            local headPos = Camera:WorldToViewportPoint(head.Position + Vector3.new(0, 0.5, 0))
                            local legPos = Camera:WorldToViewportPoint(hrp.Position - Vector3.new(0, 3, 0))
 
                            local height = math.abs(headPos.Y - legPos.Y)
                            local width = height / 2
 
                            if Config.ESP.ShowBox then
                                esp.Box.Visible = true
                                esp.Box.Size = Vector2.new(width, height)
                                esp.Box.Position = Vector2.new(vector.X - width / 2, vector.Y - height / 2)
                                esp.Box.Color = Config.ESP.BoxColor
                            else
                                esp.Box.Visible = false
                            end
 
                            if Config.ESP.ShowName then
                                esp.Name.Visible = true
                                esp.Name.Text = player.Name
                                esp.Name.Position = Vector2.new(vector.X, headPos.Y - 20)
                                esp.Name.Color = Config.ESP.NameColor
                            else
                                esp.Name.Visible = false
                            end
 
                            if Config.ESP.ShowDistance then
                                esp.Distance.Visible = true
                                esp.Distance.Text = math.floor(distance) .. "m"
                                esp.Distance.Position = Vector2.new(vector.X, legPos.Y + 5)
                                esp.Distance.Color = Config.ESP.DistanceColor
                            else
                                esp.Distance.Visible = false
                            end
 
                            if Config.ESP.ShowHealth then
                                local healthPercent = humanoid.Health / humanoid.MaxHealth
 
                                esp.HealthBarOutline.Visible = true
                                esp.HealthBarOutline.Size = Vector2.new(4, height + 2)
                                esp.HealthBarOutline.Position = Vector2.new(vector.X - width / 2 - 8, vector.Y - height / 2 - 1)
 
                                esp.HealthBar.Visible = true
                                esp.HealthBar.Size = Vector2.new(2, height * healthPercent)
                                esp.HealthBar.Position = Vector2.new(vector.X - width / 2 - 7, vector.Y + height / 2 - height * healthPercent)
                                esp.HealthBar.Color = Color3.fromRGB(
                                    math.clamp(255 * (1 - healthPercent), 0, 255),
                                    math.clamp(255 * healthPercent, 0, 255),
                                    0
                                )
                            else
                                esp.HealthBar.Visible = false
                                esp.HealthBarOutline.Visible = false
                            end
 
                            if Config.ESP.ShowSkeleton then
                                for i, connection in ipairs(skeletonConnections) do
                                    local part1 = character:FindFirstChild(connection[1])
                                    local part2 = character:FindFirstChild(connection[2])
 
                                    if part1 and part2 and esp.SkeletonLines[i] then
                                        local pos1, vis1 = Camera:WorldToViewportPoint(part1.Position)
                                        local pos2, vis2 = Camera:WorldToViewportPoint(part2.Position)
 
                                        if vis1 and vis2 then
                                            esp.SkeletonLines[i].Visible = true
                                            esp.SkeletonLines[i].From = Vector2.new(pos1.X, pos1.Y)
                                            esp.SkeletonLines[i].To = Vector2.new(pos2.X, pos2.Y)
                                            esp.SkeletonLines[i].Color = Config.ESP.SkeletonColor
                                        else
                                            esp.SkeletonLines[i].Visible = false
                                        end
                                    elseif esp.SkeletonLines[i] then
                                        esp.SkeletonLines[i].Visible = false
                                    end
                                end
                            else
                                for _, line in pairs(esp.SkeletonLines) do
                                    line.Visible = false
                                end
                            end
                        else
                            for key, drawing in pairs(esp) do
                                if key == "SkeletonLines" then
                                    for _, line in pairs(drawing) do
                                        line.Visible = false
                                    end
                                else
                                    drawing.Visible = false
                                end
                            end
                        end
                    end
                else
                    for key, drawing in pairs(esp) do
                        if key == "SkeletonLines" then
                            for _, line in pairs(drawing) do
                                line.Visible = false
                            end
                        else
                            drawing.Visible = false
                        end
                    end
                end
            else
                for key, drawing in pairs(esp) do
                    if key == "SkeletonLines" then
                        for _, line in pairs(drawing) do
                            line.Visible = false
                        end
                    else
                        drawing.Visible = false
                    end
                end
            end
        else
            for key, drawing in pairs(esp) do
                if key == "SkeletonLines" then
                    for _, line in pairs(drawing) do
                        line.Visible = false
                    end
                else
                    drawing.Visible = false
                end
            end
        end
    end
end

Players.PlayerAdded:Connect(function(player)
    createESP(player)
end)

Players.PlayerRemoving:Connect(function(player)
    removeESP(player)
end)

for _, player in ipairs(Players:GetPlayers()) do
    if player ~= LocalPlayer then
        createESP(player)
    end
end

local function getCurrentWeapon()
    local now = tick()
    if now - lastWeaponCheck < WEAPON_CHECK_INTERVAL and currentWeaponCache then
        return currentWeaponCache
    end
 
    lastWeaponCheck = now
    local character = LocalPlayer.Character
    if not character then
        currentWeaponCache = nil
        return nil
    end
 
    local tool = character:FindFirstChildOfClass("Tool")
    currentWeaponCache = tool and tool.Name or nil
    return currentWeaponCache
end

local function updateWeaponSettings()
    local weaponName = getCurrentWeapon()
    if not weaponName then
        Config.CurrentWeapon = nil
        return
    end
 
    if Config.CurrentWeapon == weaponName then return end
 
    local profile = Config.WeaponProfiles[weaponName] or Config.WeaponProfiles["Default"]
 
    Config.CurrentWeapon = weaponName
    Config.CurrentPrediction = profile.Prediction
    Config.CurrentMaxDistance = profile.MaxDistance
end

local teamCheckCache = {}
local function isOnSameTeam(player)
    if not Config.TeamCheck then return false end
    if not LocalPlayer.Team or not player.Team then return false end
 
    local cacheKey = player.UserId
    local now = tick()
 
    if teamCheckCache[cacheKey] and now - teamCheckCache[cacheKey].time < 2 then
        return teamCheckCache[cacheKey].result
    end
 
    local result = LocalPlayer.Team == player.Team
    teamCheckCache[cacheKey] = {result = result, time = now}
    return result
end

local knockedCache = {}
local function isKnocked(player)
    if not Config.KnockedCheck then return false end
 
    local cacheKey = player.UserId
    local now = tick()
 
    if knockedCache[cacheKey] and now - knockedCache[cacheKey].time < 0.5 then
        return knockedCache[cacheKey].result
    end
 
    local character = player.Character
    if not character then return false end
 
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    if humanoid and humanoid.Health <= 0 then
        knockedCache[cacheKey] = {result = true, time = now}
        return true
    end
 
    local bodyEffects = character:FindFirstChild("BodyEffects")
    local result = false
    if bodyEffects then
        local knocked = bodyEffects:FindFirstChild("K.O")
        if knocked and knocked.Value == true then
            result = true
        end
    end
 
    knockedCache[cacheKey] = {result = result, time = now}
    return result
end

local wallCheckCache = {}
local function hasWallBetween(origin, targetPart)
    if not Config.WallCheck then return false end
 
    local cacheKey = tostring(targetPart)
    local now = tick()
 
    if wallCheckCache[cacheKey] and now - wallCheckCache[cacheKey].time < 0.2 then
        return wallCheckCache[cacheKey].result
    end
 
    local rayParams = RaycastParams.new()
    rayParams.FilterDescendantsInstances = {LocalPlayer.Character, targetPart.Parent}
    rayParams.FilterType = Enum.RaycastFilterType.Exclude
    rayParams.IgnoreWater = true
 
    local direction = (targetPart.Position - origin)
    local rayResult = workspace:Raycast(origin, direction, rayParams)
 
    local result = false
    if rayResult and rayResult.Instance then
        if not rayResult.Instance:IsDescendantOf(targetPart.Parent) then
            result = true
        end
    end
 
    wallCheckCache[cacheKey] = {result = result, time = now}
    return result
end

local function isVisible(part)
    if not Config.VisibleCheck then return true end
 
    local screenPos, onScreen = Camera:WorldToViewportPoint(part.Position)
    if not onScreen then return false end
 
    return not hasWallBetween(Camera.CFrame.Position, part)
end

local function resolveVelocity(part)
    if not Config.Resolver then
        return part.Velocity
    end
 
    local velocity = part.Velocity
    local magnitude = velocity.Magnitude
 
    if magnitude < 5 then
        return Vector3.new(0, 0, 0)
    end
 
    if velocity.Y > 10 or velocity.Y < -10 then
        velocity = Vector3.new(velocity.X, velocity.Y * 0.7, velocity.Z)
    end
 
    if magnitude > 80 then
        velocity = velocity * 0.5
    end
 
    return velocity
end

local function getClosestPointOnPart(part, mousePos)
    if not Config.Multipoint then
        return part.Position
    end
 
    local size = part.Size
    local cf = part.CFrame
    local multipointSize = Config.MultipointSize / 10
 
    local points = {
        part.Position,
        (cf * CFrame.new(size.X * multipointSize, 0, 0)).Position,
        (cf * CFrame.new(-size.X * multipointSize, 0, 0)).Position,
        (cf * CFrame.new(0, size.Y * multipointSize, 0)).Position,
        (cf * CFrame.new(0, -size.Y * multipointSize, 0)).Position,
        (cf * CFrame.new(0, 0, size.Z * multipointSize)).Position,
        (cf * CFrame.new(0, 0, -size.Z * multipointSize)).Position,
        (cf * CFrame.new(size.X * multipointSize, size.Y * multipointSize, 0)).Position,
        (cf * CFrame.new(-size.X * multipointSize, size.Y * multipointSize, 0)).Position,
        (cf * CFrame.new(size.X * multipointSize, -size.Y * multipointSize, 0)).Position,
    }
 
    local closestPoint = part.Position
    local closestDist = math.huge
 
    for _, point in ipairs(points) do
        local screenPos, onScreen = Camera:WorldToViewportPoint(point)
        if onScreen then
            local dist = (Vector2.new(screenPos.X, screenPos.Y) - mousePos).Magnitude
            if dist < closestDist then
                closestDist = dist
                closestPoint = point
            end
        end
    end
 
    return closestPoint
end

local function getClosestPart(character)
    if not character then return nil, nil end
 
    if Config.HitPart ~= "Closest Point" then
        local part = character:FindFirstChild(Config.HitPart)
        if part and part:IsA("BasePart") then
            local hitPoint = getClosestPointOnPart(part, mouseLocation)
            return part, hitPoint
        end
    end
 
    local bestPart, bestPoint, bestDist = nil, nil, math.huge
 
    for _, partName in ipairs(allBodyParts) do
        local part = character:FindFirstChild(partName)
        if part and part:IsA("BasePart") then
            local hitPoint = getClosestPointOnPart(part, mouseLocation)
            local screenPos, onScreen = Camera:WorldToViewportPoint(hitPoint)
 
            if onScreen then
                local partPos = Vector2.new(screenPos.X, screenPos.Y)
                local dist = (mouseLocation - partPos).Magnitude
 
                if dist < bestDist then
                    bestPart = part
                    bestPoint = hitPoint
                    bestDist = dist
                end
            end
        end
    end
 
    return bestPart, bestPoint
end

local function updatePlayerCache()
    local now = tick()
    if now - lastCacheUpdate < CACHE_UPDATE_INTERVAL then return end
    lastCacheUpdate = now
 
    playerCache = {}
    local myPos = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not myPos then return end
 
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local distance = (myPos.Position - player.Character.HumanoidRootPart.Position).Magnitude
 
            if distance <= Config.CurrentMaxDistance * 1.3 then
                table.insert(playerCache, {
                    player = player,
                    distance = distance
                })
            end
        end
    end
 
    table.sort(playerCache, function(a, b) return a.distance < b.distance end)
end

local function updateTarget()
    updateWeaponSettings()
    updatePlayerCache()
 
    if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        cachedTarget = nil
        cachedTargetPoint = nil
        return
    end
 
    local fovRadius = Config.FOVSize
    local bestPart, bestPoint, bestDist = nil, nil, math.huge
 
    local playersToCheck = math.min(#playerCache, Config.MaxPlayersToCheck)
 
    for i = 1, playersToCheck do
        local data = playerCache[i]
        local player = data.player
 
        if Config.TeamCheck and isOnSameTeam(player) then continue end
        if Config.KnockedCheck and isKnocked(player) then continue end
 
        local part, hitPoint = getClosestPart(player.Character)
 
        if part and hitPoint then
            local screenPos, onScreen = Camera:WorldToViewportPoint(hitPoint)
            if not onScreen then continue end
 
            local partPos = Vector2.new(screenPos.X, screenPos.Y)
            local distFromMouse = (mouseLocation - partPos).Magnitude
 
            if distFromMouse <= fovRadius then
                if Config.WallCheck and hasWallBetween(Camera.CFrame.Position, part) then
                    continue
                end
 
                if distFromMouse < bestDist then
                    bestPart = part
                    bestPoint = hitPoint
                    bestDist = distFromMouse
                end
            end
        end
    end
 
    cachedTarget = bestPart
    cachedTargetPoint = bestPoint
end

local function applyPrediction(position, velocity, offset)
    return position + velocity * offset
end

local uiUpdateCounter = 0
local UI_UPDATE_RATE = 3

RunService.RenderStepped:Connect(function()
    mouseLocation = UserInputService:GetMouseLocation()
 
    uiUpdateCounter = uiUpdateCounter + 1
 
    if uiUpdateCounter % UI_UPDATE_RATE == 0 then
        FOVCircle.Position = mouseLocation
        FOVCircle.Radius = Config.FOVSize
        FOVCircle.Visible = Config.ShowFOV
 
        if Config.Multipoint then
            MultipointCircle.Position = mouseLocation
            MultipointCircle.Radius = Config.MultipointSize
            MultipointCircle.Visible = Config.ShowFOV
        else
            MultipointCircle.Visible = false
        end
 
        if Config.ShowTargeting and cachedTarget and cachedTargetPoint and Config.Enabled then
            local velocity = resolveVelocity(cachedTarget)
            local predictedPos = applyPrediction(cachedTargetPoint, velocity, Config.CurrentPrediction.X)
            local screenPos, onScreen = Camera:WorldToViewportPoint(predictedPos)
 
            if onScreen then
                TargetIndicator.Position = Vector2.new(screenPos.X, screenPos.Y)
                TargetIndicator.Visible = true
                TargetIndicator.Color = Color3.fromRGB(255, 0, 0)
                TargetIndicator.Radius = 8
            else
                TargetIndicator.Visible = false
            end
        else
            TargetIndicator.Visible = false
        end
    end
 
    updateESP()
end)

UserInputService.InputBegan:Connect(function(input, processed)
    if processed then return end
    if input.KeyCode == Config.Keybind then
        Config.Enabled = not Config.Enabled
        print("Silent Aimbot is now", Config.Enabled and "Enabled" or "Disabled")
    end
end)

local mt = getrawmetatable(game)
local oldIndex = mt.__index
setreadonly(mt, false)
mt.__index = newcclosure(function(obj, prop)
    if Config.Enabled and obj:IsA("Mouse") and (prop == "Hit" or prop == "Target") then
        if cachedTarget and cachedTargetPoint then
            local velocity = resolveVelocity(cachedTarget)
            local predictedPos = applyPrediction(cachedTargetPoint, velocity, Config.CurrentPrediction.X)
 
            return prop == "Hit" and CFrame.new(predictedPos) or cachedTarget
        end
    end
    return oldIndex(obj, prop)
end)
setreadonly(mt, true)

local frameCounter = 0
RunService.RenderStepped:Connect(function()
    if not Config.Enabled then return end
    frameCounter = frameCounter + 1
    if frameCounter % Config.UpdateRate == 0 then
        updateTarget()
    end
end)

local function setupRapidFire()
    if rapidFireConnection then
        rapidFireConnection:Disconnect()
        rapidFireConnection = nil
    end
 
    if not Config.RapidFire then return end
 
    rapidFireConnection = UserInputService.InputBegan:Connect(function(input, processed)
        if processed then return end
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            local shooting = true
 
            local connection
            connection = UserInputService.InputEnded:Connect(function(endInput)
                if endInput.UserInputType == Enum.UserInputType.MouseButton1 then
                    shooting = false
                    connection:Disconnect()
                end
            end)
 
            while shooting and Config.RapidFire and Config.Enabled do
                local currentTool = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Tool")
                if currentTool then
                    currentTool:Activate()
                end
                wait(Config.RapidFireDelay)
            end
        end
    end)
end

setupRapidFire()

local oldRandom
oldRandom = hookfunction(math.random, function(...)
    local args = {...}
    if checkcaller() then return oldRandom(...) end
    if (#args == 0) or (args[1] == -0.05 and args[2] == 0.05) or (args[1] == -0.1) or (args[1] == -0.05) then
        if SpreadMod.BulletSpread.Enabled then
            return oldRandom(...) * (SpreadMod.BulletSpread.Amount / 100)
        end
    end
    return oldRandom(...)
end)

Players.PlayerRemoving:Connect(function(player)
    teamCheckCache[player.UserId] = nil
    knockedCache[player.UserId] = nil
end)

-- GUI CREATION (FENNIX V2 STYLE)
local TweenService = game:GetService("TweenService")

-- Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð³Ð»Ð°Ð²Ð½Ñ‹Ð¹ GUI
local gui = Instance.new("ScreenGui")
gui.Name = "FennixV2_SilentAim"
gui.ResetOnSpawn = false
gui.IgnoreGuiInset = true
gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
gui.Parent = CoreGui

-- Ð“Ð»Ð°Ð²Ð½Ñ‹Ð¹ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€
local mainContainer = Instance.new("Frame")
mainContainer.Name = "MainContainer"
mainContainer.Size = UDim2.new(0, 600, 0, 450)
mainContainer.Position = UDim2.new(0.5, -300, 0.5, -225)
mainContainer.BackgroundColor3 = Color3.fromRGB(18, 18, 24)
mainContainer.BorderSizePixel = 0
mainContainer.Active = true
mainContainer.Draggable = true
mainContainer.Parent = gui

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 12)
mainCorner.Parent = mainContainer

-- ÐÐµÐ¾Ð½Ð¾Ð²Ð°Ñ Ð¾Ð±Ð²Ð¾Ð´ÐºÐ°
local mainStroke = Instance.new("UIStroke")
mainStroke.Color = Color3.fromRGB(138, 43, 226)
mainStroke.Thickness = 2
mainStroke.Transparency = 0.3
mainStroke.Parent = mainContainer

-- ÐÐ½Ð¸Ð¼Ð°Ñ†Ð¸Ñ Ð¾Ð±Ð²Ð¾Ð´ÐºÐ¸
spawn(function()
    while wait(2) do
        if mainStroke then
            TweenService:Create(mainStroke, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
                Color = Color3.fromRGB(75, 0, 130)
            }):Play()
            wait(2)
            TweenService:Create(mainStroke, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
                Color = Color3.fromRGB(138, 43, 226)
            }):Play()
        end
    end
end)

-- Ð’ÐµÑ€Ñ…Ð½ÑÑ Ð¿Ð°Ð½ÐµÐ»ÑŒ
local topBar = Instance.new("Frame")
topBar.Name = "TopBar"
topBar.Size = UDim2.new(1, 0, 0, 50)
topBar.BackgroundColor3 = Color3.fromRGB(24, 24, 32)
topBar.BorderSizePixel = 0
topBar.Parent = mainContainer

local topBarCorner = Instance.new("UICorner")
topBarCorner.CornerRadius = UDim.new(0, 12)
topBarCorner.Parent = topBar

local topBarFix = Instance.new("Frame")
topBarFix.Size = UDim2.new(1, 0, 0, 12)
topBarFix.Position = UDim2.new(0, 0, 1, -12)
topBarFix.BackgroundColor3 = Color3.fromRGB(24, 24, 32)
topBarFix.BorderSizePixel = 0
topBarFix.Parent = topBar

-- Ð“Ñ€Ð°Ð´Ð¸ÐµÐ½Ñ‚ Ð´Ð»Ñ Ñ‚Ð¾Ð¿ Ð±Ð°Ñ€Ð°
local topGradient = Instance.new("UIGradient")
topGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(138, 43, 226)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(75, 0, 130))
}
topGradient.Rotation = 45
topGradient.Parent = topBar

-- Ð›Ð¾Ð³Ð¾Ñ‚Ð¸Ð¿/Ð˜ÐºÐ¾Ð½ÐºÐ°
local logo = Instance.new("TextLabel")
logo.Size = UDim2.new(0, 40, 0, 40)
logo.Position = UDim2.new(0, 10, 0, 5)
logo.BackgroundTransparency = 1
logo.Text = "ðŸŽ¯"
logo.TextSize = 28
logo.TextColor3 = Color3.fromRGB(255, 255, 255)
logo.Font = Enum.Font.GothamBold
logo.Parent = topBar

-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº
local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(0, 200, 0, 25)
titleLabel.Position = UDim2.new(0, 55, 0, 8)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "FENNIX SILENT AIM"
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
titleLabel.TextSize = 16
titleLabel.Font = Enum.Font.GothamBold
titleLabel.TextXAlignment = Enum.TextXAlignment.Left
titleLabel.Parent = topBar

-- ÐŸÐ¾Ð´Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº
local subtitleLabel = Instance.new("TextLabel")
subtitleLabel.Size = UDim2.new(0, 200, 0, 15)
subtitleLabel.Position = UDim2.new(0, 55, 0, 30)
subtitleLabel.BackgroundTransparency = 1
subtitleLabel.Text = "Premium Edition v2.2"
subtitleLabel.TextColor3 = Color3.fromRGB(180, 180, 200)
subtitleLabel.TextSize = 11
subtitleLabel.Font = Enum.Font.Gotham
subtitleLabel.TextXAlignment = Enum.TextXAlignment.Left
subtitleLabel.Parent = topBar

-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ñ
local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 35, 0, 35)
closeButton.Position = UDim2.new(1, -45, 0, 7.5)
closeButton.BackgroundColor3 = Color3.fromRGB(220, 53, 69)
closeButton.Text = "âœ•"
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.TextSize = 18
closeButton.Font = Enum.Font.GothamBold
closeButton.BorderSizePixel = 0
closeButton.Parent = topBar

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(0, 8)
closeCorner.Parent = closeButton

closeButton.MouseButton1Click:Connect(function()
    mainContainer.Visible = false
end)

closeButton.MouseEnter:Connect(function()
    TweenService:Create(closeButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(255, 73, 89)}):Play()
end)

closeButton.MouseLeave:Connect(function()
    TweenService:Create(closeButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(220, 53, 69)}):Play()
end)

-- Ð‘Ð¾ÐºÐ¾Ð²Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ Ñ Ð²ÐºÐ»Ð°Ð´ÐºÐ°Ð¼Ð¸
local sidebar = Instance.new("Frame")
sidebar.Name = "Sidebar"
sidebar.Size = UDim2.new(0, 140, 1, -60)
sidebar.Position = UDim2.new(0, 10, 0, 60)
sidebar.BackgroundColor3 = Color3.fromRGB(24, 24, 32)
sidebar.BorderSizePixel = 0
sidebar.Parent = mainContainer

local sidebarCorner = Instance.new("UICorner")
sidebarCorner.CornerRadius = UDim.new(0, 10)
sidebarCorner.Parent = sidebar

-- ÐšÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ Ð´Ð»Ñ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚Ð°
local contentContainer = Instance.new("ScrollingFrame")
contentContainer.Name = "ContentContainer"
contentContainer.Size = UDim2.new(0, 420, 1, -60)
contentContainer.Position = UDim2.new(0, 160, 0, 60)
contentContainer.BackgroundColor3 = Color3.fromRGB(24, 24, 32)
contentContainer.BorderSizePixel = 0
contentContainer.ScrollBarThickness = 4
contentContainer.ScrollBarImageColor3 = Color3.fromRGB(138, 43, 226)
contentContainer.CanvasSize = UDim2.new(0, 0, 0, 0)
contentContainer.Parent = mainContainer

local contentCorner = Instance.new("UICorner")
contentCorner.CornerRadius = UDim.new(0, 10)
contentCorner.Parent = contentContainer

local contentLayout = Instance.new("UIListLayout")
contentLayout.Padding = UDim.new(0, 8)
contentLayout.SortOrder = Enum.SortOrder.LayoutOrder
contentLayout.Parent = contentContainer

contentLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
    contentContainer.CanvasSize = UDim2.new(0, 0, 0, contentLayout.AbsoluteContentSize.Y + 15)
end)

-- Ð’ÐºÐ»Ð°Ð´ÐºÐ¸
local tabs = {}
local currentTab = nil

local function createTab(name, icon, order)
    local tabButton = Instance.new("TextButton")
    tabButton.Name = name .. "Tab"
    tabButton.Size = UDim2.new(1, -10, 0, 40)
    tabButton.Position = UDim2.new(0, 5, 0, (order - 1) * 45 + 5)
    tabButton.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
    tabButton.Text = ""
    tabButton.BorderSizePixel = 0
    tabButton.AutoButtonColor = false
    tabButton.Parent = sidebar
    
    local tabCorner = Instance.new("UICorner")
    tabCorner.CornerRadius = UDim.new(0, 8)
    tabCorner.Parent = tabButton
    
    local tabIcon = Instance.new("TextLabel")
    tabIcon.Size = UDim2.new(0, 25, 0, 25)
    tabIcon.Position = UDim2.new(0, 8, 0.5, -12.5)
    tabIcon.BackgroundTransparency = 1
    tabIcon.Text = icon
    tabIcon.TextSize = 18
    tabIcon.TextColor3 = Color3.fromRGB(180, 180, 200)
    tabIcon.Font = Enum.Font.GothamBold
    tabIcon.Parent = tabButton
    
    local tabLabel = Instance.new("TextLabel")
    tabLabel.Size = UDim2.new(1, -40, 1, 0)
    tabLabel.Position = UDim2.new(0, 38, 0, 0)
    tabLabel.BackgroundTransparency = 1
    tabLabel.Text = name
    tabLabel.TextColor3 = Color3.fromRGB(180, 180, 200)
    tabLabel.TextSize = 12
    tabLabel.Font = Enum.Font.GothamBold
    tabLabel.TextXAlignment = Enum.TextXAlignment.Left
    tabLabel.Parent = tabButton
    
    local tabContent = Instance.new("Frame")
    tabContent.Name = name .. "Content"
    tabContent.Size = UDim2.new(1, -10, 0, 0)
    tabContent.BackgroundTransparency = 1
    tabContent.Visible = false
    tabContent.Parent = contentContainer
    
    local tabContentLayout = Instance.new("UIListLayout")
    tabContentLayout.Padding = UDim.new(0, 8)
    tabContentLayout.SortOrder = Enum.SortOrder.LayoutOrder
    tabContentLayout.Parent = tabContent
    
    tabs[name] = {
        button = tabButton,
        content = tabContent,
        icon = tabIcon,
        label = tabLabel
    }
    
    tabButton.MouseButton1Click:Connect(function()
        for tabName, tab in pairs(tabs) do
            tab.content.Visible = false
            TweenService:Create(tab.button, TweenInfo.new(0.2), {
                BackgroundColor3 = Color3.fromRGB(30, 30, 40)
            }):Play()
            tab.icon.TextColor3 = Color3.fromRGB(180, 180, 200)
            tab.label.TextColor3 = Color3.fromRGB(180, 180, 200)
        end
        
        tabContent.Visible = true
        currentTab = name
        TweenService:Create(tabButton, TweenInfo.new(0.2), {
            BackgroundColor3 = Color3.fromRGB(138, 43, 226)
        }):Play()
        tabIcon.TextColor3 = Color3.fromRGB(255, 255, 255)
        tabLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    end)
    
    tabButton.MouseEnter:Connect(function()
        if currentTab ~= name then
            TweenService:Create(tabButton, TweenInfo.new(0.2), {
                BackgroundColor3 = Color3.fromRGB(40, 40, 50)
            }):Play()
        end
    end)
    
    tabButton.MouseLeave:Connect(function()
        if currentTab ~= name then
            TweenService:Create(tabButton, TweenInfo.new(0.2), {
                BackgroundColor3 = Color3.fromRGB(30, 30, 40)
            }):Play()
        end
    end)
    
    return tabContent
end

-- Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð²ÐºÐ»Ð°Ð´ÐºÐ¸
local aimbotTab = createTab("Aimbot", "ðŸŽ¯", 1)
local visualsTab = createTab("Visuals", "ðŸ‘", 2)
local miscTab = createTab("Misc", "âš™", 3)
local statusTab = createTab("Status", "ðŸ“Š", 4)

-- Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð´Ð»Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð²
local function createToggle(parent, name, default, callback)
    local toggle = Instance.new("Frame")
    toggle.Size = UDim2.new(1, -10, 0, 45)
    toggle.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
    toggle.BorderSizePixel = 0
    toggle.Parent = parent
    
    local toggleCorner = Instance.new("UICorner")
    toggleCorner.CornerRadius = UDim.new(0, 8)
    toggleCorner.Parent = toggle
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -70, 1, 0)
    label.Position = UDim2.new(0, 12, 0, 0)
    label.BackgroundTransparency = 1
    label.Text = name
    label.TextColor3 = Color3.fromRGB(220, 220, 230)
    label.TextSize = 13
    label.Font = Enum.Font.Gotham
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = toggle
    
    local switchBg = Instance.new("Frame")
    switchBg.Size = UDim2.new(0, 50, 0, 26)
    switchBg.Position = UDim2.new(1, -60, 0.5, -13)
    switchBg.BackgroundColor3 = default and Color3.fromRGB(138, 43, 226) or Color3.fromRGB(50, 50, 60)
    switchBg.BorderSizePixel = 0
    switchBg.Parent = toggle
    
    local switchCorner = Instance.new("UICorner")
    switchCorner.CornerRadius = UDim.new(1, 0)
    switchCorner.Parent = switchBg
    
    local switchCircle = Instance.new("Frame")
    switchCircle.Size = UDim2.new(0, 20, 0, 20)
    switchCircle.Position = default and UDim2.new(1, -23, 0.5, -10) or UDim2.new(0, 3, 0.5, -10)
    switchCircle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    switchCircle.BorderSizePixel = 0
    switchCircle.Parent = switchBg
    
    local circleCorner = Instance.new("UICorner")
    circleCorner.CornerRadius = UDim.new(1, 0)
    circleCorner.Parent = switchCircle
    
    local enabled = default
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, 0, 1, 0)
    button.BackgroundTransparency = 1
    button.Text = ""
    button.Parent = switchBg
    
    button.MouseButton1Click:Connect(function()
        enabled = not enabled
        callback(enabled)
        
        TweenService:Create(switchBg, TweenInfo.new(0.2), {
            BackgroundColor3 = enabled and Color3.fromRGB(138, 43, 226) or Color3.fromRGB(50, 50, 60)
        }):Play()
        
        TweenService:Create(switchCircle, TweenInfo.new(0.2), {
            Position = enabled and UDim2.new(1, -23, 0.5, -10) or UDim2.new(0, 3, 0.5, -10)
        }):Play()
    end)
    
    return toggle
end

local function createSlider(parent, name, min, max, default, callback, decimal)
    local slider = Instance.new("Frame")
    slider.Size = UDim2.new(1, -10, 0, 60)
    slider.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
    slider.BorderSizePixel = 0
    slider.Parent = parent
    
    local sliderCorner = Instance.new("UICorner")
    sliderCorner.CornerRadius = UDim.new(0, 8)
    sliderCorner.Parent = slider
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -80, 0, 25)
    label.Position = UDim2.new(0, 12, 0, 5)
    label.BackgroundTransparency = 1
    label.Text = name
    label.TextColor3 = Color3.fromRGB(220, 220, 230)
    label.TextSize = 13
    label.Font = Enum.Font.Gotham
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = slider
    
    local valueLabel = Instance.new("TextLabel")
    valueLabel.Size = UDim2.new(0, 65, 0, 25)
    valueLabel.Position = UDim2.new(1, -75, 0, 5)
    valueLabel.BackgroundTransparency = 1
    valueLabel.Text = decimal and string.format("%.2f", default) or tostring(default)
    valueLabel.TextColor3 = Color3.fromRGB(138, 43, 226)
    valueLabel.TextSize = 13
    valueLabel.Font = Enum.Font.GothamBold
    valueLabel.TextXAlignment = Enum.TextXAlignment.Right
    valueLabel.Parent = slider
    
    local sliderBg = Instance.new("Frame")
    sliderBg.Size = UDim2.new(1, -24, 0, 6)
    sliderBg.Position = UDim2.new(0, 12, 1, -18)
    sliderBg.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
    sliderBg.BorderSizePixel = 0
    sliderBg.Parent = slider
    
    local sliderBgCorner = Instance.new("UICorner")
    sliderBgCorner.CornerRadius = UDim.new(1, 0)
    sliderBgCorner.Parent = sliderBg
    
    local sliderFill = Instance.new("Frame")
    sliderFill.Size = UDim2.new((default - min) / (max - min), 0, 1, 0)
    sliderFill.BackgroundColor3 = Color3.fromRGB(138, 43, 226)
    sliderFill.BorderSizePixel = 0
    sliderFill.Parent = sliderBg
    
    local sliderFillCorner = Instance.new("UICorner")
    sliderFillCorner.CornerRadius = UDim.new(1, 0)
    sliderFillCorner.Parent = sliderFill
    
    local sliderButton = Instance.new("TextButton")
    sliderButton.Size = UDim2.new(1, 0, 1, 0)
    sliderButton.BackgroundTransparency = 1
    sliderButton.Text = ""
    sliderButton.Parent = sliderBg
    
    local dragging = false
    
    sliderButton.MouseButton1Down:Connect(function()
        dragging = true
    end)
    
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local pos = math.clamp((input.Position.X - sliderBg.AbsolutePosition.X) / sliderBg.AbsoluteSize.X, 0, 1)
            local value = min + (max - min) * pos
            
            if not decimal then
                value = math.floor(value)
            end
            
            TweenService:Create(sliderFill, TweenInfo.new(0.1), {
                Size = UDim2.new(pos, 0, 1, 0)
            }):Play()
            
            valueLabel.Text = decimal and string.format("%.2f", value) or tostring(value)
            callback(value)
        end
    end)
    
    return slider
end

local function createDropdown(parent, name, options, default, callback)
    local dropdown = Instance.new("Frame")
    dropdown.Size = UDim2.new(1, -10, 0, 45)
    dropdown.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
    dropdown.BorderSizePixel = 0
    dropdown.ClipsDescendants = false
    dropdown.Parent = parent
    
    local dropdownCorner = Instance.new("UICorner")
    dropdownCorner.CornerRadius = UDim.new(0, 8)
    dropdownCorner.Parent = dropdown
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(0, 120, 1, 0)
    label.Position = UDim2.new(0, 12, 0, 0)
    label.BackgroundTransparency = 1
    label.Text = name
    label.TextColor3 = Color3.fromRGB(220, 220, 230)
    label.TextSize = 13
    label.Font = Enum.Font.Gotham
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = dropdown
    
    local selectButton = Instance.new("TextButton")
    selectButton.Size = UDim2.new(1, -145, 0, 32)
    selectButton.Position = UDim2.new(0, 135, 0.5, -16)
    selectButton.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
    selectButton.Text = default
    selectButton.TextColor3 = Color3.fromRGB(220, 220, 230)
    selectButton.TextSize = 12
    selectButton.Font = Enum.Font.Gotham
    selectButton.BorderSizePixel = 0
    selectButton.ClipsDescendants = false
    selectButton.ZIndex = 2
    selectButton.Parent = dropdown
    
    local selectCorner = Instance.new("UICorner")
    selectCorner.CornerRadius = UDim.new(0, 6)
    selectCorner.Parent = selectButton
    
    local arrow = Instance.new("TextLabel")
    arrow.Size = UDim2.new(0, 20, 1, 0)
    arrow.Position = UDim2.new(1, -25, 0, 0)
    arrow.BackgroundTransparency = 1
    arrow.Text = "â–¼"
    arrow.TextColor3 = Color3.fromRGB(180, 180, 200)
    arrow.TextSize = 10
    arrow.Font = Enum.Font.GothamBold
    arrow.Parent = selectButton
    
    local optionsFrame = Instance.new("Frame")
    optionsFrame.Size = UDim2.new(1, 0, 0, #options * 35)
    optionsFrame.Position = UDim2.new(0, 0, 1, 3)
    optionsFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
    optionsFrame.BorderSizePixel = 0
    optionsFrame.Visible = false
    optionsFrame.ZIndex = 10
    optionsFrame.Parent = selectButton
    
    local optionsCorner = Instance.new("UICorner")
    optionsCorner.CornerRadius = UDim.new(0, 6)
    optionsCorner.Parent = optionsFrame
    
    local optionsStroke = Instance.new("UIStroke")
    optionsStroke.Color = Color3.fromRGB(138, 43, 226)
    optionsStroke.Thickness = 1
    optionsStroke.Parent = optionsFrame
    
    for i, option in ipairs(options) do
        local optionButton = Instance.new("TextButton")
        optionButton.Size = UDim2.new(1, -8, 0, 30)
        optionButton.Position = UDim2.new(0, 4, 0, (i - 1) * 35 + 2)
        optionButton.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
        optionButton.Text = option
        optionButton.TextColor3 = Color3.fromRGB(220, 220, 230)
        optionButton.TextSize = 11
        optionButton.Font = Enum.Font.Gotham
        optionButton.BorderSizePixel = 0
        optionButton.ZIndex = 11
        optionButton.Parent = optionsFrame
        
        local optionCorner = Instance.new("UICorner")
        optionCorner.CornerRadius = UDim.new(0, 5)
        optionCorner.Parent = optionButton
        
        optionButton.MouseButton1Click:Connect(function()
            selectButton.Text = option
            optionsFrame.Visible = false
            arrow.Text = "â–¼"
            callback(option)
        end)
        
        optionButton.MouseEnter:Connect(function()
            TweenService:Create(optionButton, TweenInfo.new(0.15), {
                BackgroundColor3 = Color3.fromRGB(138, 43, 226)
            }):Play()
        end)
        
        optionButton.MouseLeave:Connect(function()
            TweenService:Create(optionButton, TweenInfo.new(0.15), {
                BackgroundColor3 = Color3.fromRGB(40, 40, 50)
            }):Play()
        end)
    end
    
    selectButton.MouseButton1Click:Connect(function()
        optionsFrame.Visible = not optionsFrame.Visible
        arrow.Text = optionsFrame.Visible and "â–²" or "â–¼"
    end)
    
    return dropdown
end

-- Ð—Ð°Ð¿Ð¾Ð»Ð½ÑÐµÐ¼ Ð²ÐºÐ»Ð°Ð´ÐºÑƒ Aimbot
createToggle(aimbotTab, "Aimbot Enabled", Config.Enabled, function(val)
    Config.Enabled = val
end)

createToggle(aimbotTab, "Show FOV Circle", Config.ShowFOV, function(val)
    Config.ShowFOV = val
end)

createToggle(aimbotTab, "Multipoint", Config.Multipoint, function(val)
    Config.Multipoint = val
end)

createSlider(aimbotTab, "FOV Size", 10, 300, Config.FOVSize, function(val)
    Config.FOVSize = val
end, false)

createSlider(aimbotTab, "Multipoint Size", 1, 20, Config.MultipointSize, function(val)
    Config.MultipointSize = val
end, false)

local hitPartOptions = {"Closest Point", "Head", "UpperTorso", "LowerTorso", "HumanoidRootPart"}
createDropdown(aimbotTab, "Hit Part", hitPartOptions, Config.HitPart, function(val)
    Config.HitPart = val
end)

createToggle(aimbotTab, "Resolver", Config.Resolver, function(val)
    Config.Resolver = val
end)

createToggle(aimbotTab, "Team Check", Config.TeamCheck, function(val)
    Config.TeamCheck = val
end)

createToggle(aimbotTab, "Wall Check", Config.WallCheck, function(val)
    Config.WallCheck = val
end)

createToggle(aimbotTab, "Knocked Check", Config.KnockedCheck, function(val)
    Config.KnockedCheck = val
end)

-- Ð—Ð°Ð¿Ð¾Ð»Ð½ÑÐµÐ¼ Ð²ÐºÐ»Ð°Ð´ÐºÑƒ Visuals
createToggle(visualsTab, "ESP Enabled", Config.ESP.Enabled, function(val)
    Config.ESP.Enabled = val
end)

createToggle(visualsTab, "Show Box", Config.ESP.ShowBox, function(val)
    Config.ESP.ShowBox = val
end)

createToggle(visualsTab, "Show Name", Config.ESP.ShowName, function(val)
    Config.ESP.ShowName = val
end)

createToggle(visualsTab, "Show Distance", Config.ESP.ShowDistance, function(val)
    Config.ESP.ShowDistance = val
end)

createToggle(visualsTab, "Show Health", Config.ESP.ShowHealth, function(val)
    Config.ESP.ShowHealth = val
end)

createToggle(visualsTab, "Show Skeleton", Config.ESP.ShowSkeleton, function(val)
    Config.ESP.ShowSkeleton = val
end)

createSlider(visualsTab, "ESP Distance", 100, 1000, Config.ESP.MaxDistance, function(val)
    Config.ESP.MaxDistance = val
end, false)

-- Ð—Ð°Ð¿Ð¾Ð»Ð½ÑÐµÐ¼ Ð²ÐºÐ»Ð°Ð´ÐºÑƒ Misc
createToggle(miscTab, "Rapid Fire", Config.RapidFire, function(val)
    Config.RapidFire = val
    setupRapidFire()
end)

createSlider(miscTab, "Rapid Fire Delay", 0.01, 0.5, Config.RapidFireDelay, function(val)
    Config.RapidFireDelay = val
end, true)

createToggle(miscTab, "Spread Modifier", SpreadMod.BulletSpread.Enabled, function(val)
    SpreadMod.BulletSpread.Enabled = val
end)

createSlider(miscTab, "Spread Amount", 0, 100, SpreadMod.BulletSpread.Amount, function(val)
    SpreadMod.BulletSpread.Amount = val
end, false)

createSlider(miscTab, "Update Rate", 1, 10, Config.UpdateRate, function(val)
    Config.UpdateRate = val
end, false)

-- Ð—Ð°Ð¿Ð¾Ð»Ð½ÑÐµÐ¼ Ð²ÐºÐ»Ð°Ð´ÐºÑƒ Status
local statusInfo = Instance.new("Frame")
statusInfo.Size = UDim2.new(1, -10, 0, 200)
statusInfo.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
statusInfo.BorderSizePixel = 0
statusInfo.Parent = statusTab

local statusCorner = Instance.new("UICorner")
statusCorner.CornerRadius = UDim.new(0, 8)
statusCorner.Parent = statusInfo

local function createStatusLabel(text, yPos)
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -20, 0, 25)
    label.Position = UDim2.new(0, 10, 0, yPos)
    label.BackgroundTransparency = 1
    label.Text = text
    label.TextColor3 = Color3.fromRGB(220, 220, 230)
    label.TextSize = 12
    label.Font = Enum.Font.Gotham
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = statusInfo
    return label
end

local weaponLabel = createStatusLabel("Weapon: None", 10)
local targetLabel = createStatusLabel("Target: None", 40)
local fpsLabel = createStatusLabel("FPS: 60", 70)
local pingLabel = createStatusLabel("Ping: 0ms", 100)
local statusLabel = createStatusLabel("Status: Active", 130)

-- ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÑ‚Ð°Ñ‚ÑƒÑÐ°
local lastUpdate = 0
local fpsCounter = 0
local fpsDisplay = 60

RunService.Heartbeat:Connect(function()
    fpsCounter = fpsCounter + 1
    local now = tick()
    
    if now - lastUpdate >= 1 then
        fpsDisplay = math.floor(fpsCounter / (now - lastUpdate))
        fpsCounter = 0
        lastUpdate = now
        
        local weapon = getCurrentWeapon()
        weaponLabel.Text = "Weapon: " .. (weapon or "None")
        weaponLabel.TextColor3 = weapon and Color3.fromRGB(138, 43, 226) or Color3.fromRGB(180, 180, 200)
        
        targetLabel.Text = "Target: " .. (cachedTarget and "Locked" or "None")
        targetLabel.TextColor3 = cachedTarget and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
        
        fpsLabel.Text = "FPS: " .. fpsDisplay
        fpsLabel.TextColor3 = fpsDisplay >= 50 and Color3.fromRGB(100, 255, 100) or 
                              fpsDisplay >= 30 and Color3.fromRGB(255, 200, 100) or 
                              Color3.fromRGB(255, 100, 100)
        
        local ping = game:GetService("Stats").Network.ServerStatsItem["Data Ping"]:GetValue()
        pingLabel.Text = "Ping: " .. math.floor(ping) .. "ms"
        
        statusLabel.Text = "Status: " .. (Config.Enabled and "Active" or "Inactive")
        statusLabel.TextColor3 = Config.Enabled and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
    end
end)

-- ÐÐºÑ‚Ð¸Ð²Ð¸Ñ€ÑƒÐµÐ¼ Ð¿ÐµÑ€Ð²ÑƒÑŽ Ð²ÐºÐ»Ð°Ð´ÐºÑƒ
tabs["Aimbot"].button.MouseButton1Click:Connect(function() end)
tabs["Aimbot"].button.MouseButton1Click:Fire()

-- ÐšÐ»Ð°Ð²Ð¸ÑˆÐ° Ð´Ð»Ñ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¸Ñ/Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ñ
UserInputService.InputBegan:Connect(function(input, gp)
    if not gp and input.KeyCode == Enum.KeyCode.Insert then
        mainContainer.Visible = not mainContainer.Visible
    end
end)

print("âœ… Fennix V2 GUI Loaded!")

end

-- Ð—Ð°Ð¿ÑƒÑÐº GUI Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸
createAuthGUI()
